https://github.com/levsgit/web-larek-frontend

# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Слои модели MVP (классы)
### Слой модель
1) ProductList
2) Basket
3) Order

### Слой представления
1) BasketUi
2) CatalogUi
3) OrderUi
4) AllModalsUi

### Слой презентера
Представлен в виде класса App, который замыкает на себе предыдущие два слоя.

## Используемые классы
### 1) App
Класс для инициализации приложения. Отвечает за запуск всех прочих подклассов.

*Конструктор*
Задает следующие поля объекту класса:
settings - map всех селекторов и темплейтов
modal - класс всех модальных окон
basket - класс корзины
basketUi - класс интерфейса корзины
validation - класс валидации
productList - класс списка всех товаров
catalogUi - класс интерфейса каталога
api - класс API
order - класс заказа
orderUI - класс интерфейса заказа

*Методы*
getProducts - запрашивает список всех товаров через API и отображает их в каталоге

openCardModal - открывает модальное окно карточки.

createOrder - делает запрос на сервер с заказом и отражает результат в интерфейсе

addItemToBasket - добавляет товар в корзину

removeItemFromBasket - удаляет товар из корзины

openBasketModal - открывает модальное окно корзины

### 2) ProductList
Класс списка всех продуктов типа Product (тип задается интерфейсом в соответсвии с тем, что возвращает API).
*Консутрктор*
Получает на вход массив Product, сопоставляет его одноименному полю объекта.

*Методы*
getProducts - возвращает массив продуктов

### 3) AllModalsUi
*Конструктор*
Получает на вход settings - map всех селекторов и темплейтов. Вытаскивает из settings все селекторы модальных окон и элементов модальных окон. Добавляет к объект класса сами элементы.

*Методы*
openModal - открывает переданное в функцию модальное окно
closeModal - закрывает модальное окно
setCardModal - заполняет данные в модальном окне карточки

### 4) Basket
Конструктор пустой.

*Поля*
basketItems - массив Product'ов, которые лежат в корзине

*Методы*
calculateBasketCounter - метод подсчета количества товаров в корзине
calculateTotalPrice - метод подсчета итоговой суммы покупок
cleanBasket - метод очищения списка товаров в корзине

### 5) BasketUi
Класс отображения данных корзины в интерфейсе.
*Конструктор*
Получает на вход settings - map всех селекторов и темплейтов. Затем создает объекты для взаимодействия с html-элементом корзины, а в частности с полями и кнопками.

*Методы*
createBasketItem - метод создающий html-элемент товара для корзины.
renderBasketItems - метод отображающий все лежащие в корзине товары при помощи createBasketItem.
updateBasketCounter - метод обновляющий счетчик товаров в корзине.
updateTotalPrice - метод обновляющий общую стоимость товаров в корзине.
resetBasket - метод очищающий интерфейс внутри корзины.
initBasket - метод создающий пустую корзину.

### 6) CatalogUi
Класс для создания карточек товаров в каталоге.
*Конструктор*
Получает на вход settings - map всех селекторов и темплейтов. Затем создает поля html-элементов каталога в объекте.

*Методы*
createCard - создает html-элемент карточки товара по получаемому Product.
renderCatalog - отображает каталог товаров по получаемому массиву товаров типа Product при помощи метода createCard.

### 7) Order
Класс заказа из корзины.
*Поля*
payment - метод оплаты, выбранный клиентом
address - адрес доставки клиента
email - емейл клиента
phone - телефонный номер клиента

*Конструктор*
Создает пустой элемент заказа.

*Методы*
setParam - задает одно из полей по получаемому ключу и значению.
returnOrder - возвращает данные заказа.

### 8) OrderUi
Класс отображения данных заказа в интерфейсе

*Конструктор*
Получает на вход settings - map всех селекторов и темплейтов. Затем создает поля с html-элементами для взаимодействия с интерфейсом заказа. После чего задает элементам соответсвующие функции открытия модальных окон и ввода данных.

